{
  "schemaVersion": 1,
  "issue": {
    "number": 10,
    "title": "feat(desktop): Add Releases section showing versions",
    "url": "https://github.com/anthropics/tiki-v2/issues/10"
  },
  "createdAt": "2026-02-02T21:35:00.000Z",
  "successCriteria": [
    {
      "id": "SC1",
      "category": "Functional",
      "criterion": "Releases load from gh release list when section expands"
    },
    {
      "id": "SC2",
      "category": "Functional",
      "criterion": "Each release shows version tag, name, and publish date"
    },
    {
      "id": "SC3",
      "category": "Functional",
      "criterion": "Draft releases display a Draft badge"
    },
    {
      "id": "SC4",
      "category": "Functional",
      "criterion": "Prerelease versions display a Pre-release badge"
    },
    {
      "id": "SC5",
      "category": "Functional",
      "criterion": "Refresh button triggers a new fetch"
    },
    {
      "id": "SC6",
      "category": "Functional",
      "criterion": "Empty state displays No releases message"
    },
    {
      "id": "SC7",
      "category": "Functional",
      "criterion": "Error state shows appropriate error message"
    },
    {
      "id": "SC8",
      "category": "Integration",
      "criterion": "ReleasesSection integrates into existing sidebar"
    }
  ],
  "phases": [
    {
      "number": 1,
      "title": "Add Rust fetch_github_releases command",
      "status": "pending",
      "content": "Add the GitHubRelease struct and fetch_github_releases Tauri command to github.rs. The command should:\n\n1. Define GitHubRelease struct with fields: tagName, name, isDraft, isPrerelease, publishedAt, url\n2. Implement fetch_github_releases command that runs `gh release list --json tagName,name,isDraft,isPrerelease,publishedAt,url`\n3. Accept optional limit parameter (default 20)\n4. Handle errors: gh not installed, not authenticated, not a git repo\n5. Register command in lib.rs invoke_handler\n\nFollow the exact pattern used by fetch_github_issues.",
      "verification": [
        "Rust compiles without errors",
        "Command is registered in lib.rs invoke_handler"
      ],
      "addressesCriteria": ["SC1"],
      "files": [
        "apps/desktop/src-tauri/src/github.rs",
        "apps/desktop/src-tauri/src/lib.rs"
      ],
      "dependencies": []
    },
    {
      "number": 2,
      "title": "Create releasesStore.ts Zustand store",
      "status": "pending",
      "content": "Create the Zustand store for releases state management:\n\n1. Define GitHubRelease interface matching Rust struct (tagName, name, isDraft, isPrerelease, publishedAt, url)\n2. Define ReleasesState: releases array, isLoading, error, lastFetched\n3. Define ReleasesActions: setReleases, setLoading, setError, clearError, setLastFetched\n4. Create useReleasesStore with Zustand create()\n5. Export from stores/index.ts\n\nFollow the exact pattern from issuesStore.ts.",
      "verification": [
        "TypeScript compiles without errors",
        "Store is exported from stores/index.ts"
      ],
      "addressesCriteria": ["SC1"],
      "files": [
        "apps/desktop/src/stores/releasesStore.ts",
        "apps/desktop/src/stores/index.ts"
      ],
      "dependencies": [1]
    },
    {
      "number": 3,
      "title": "Create ReleaseCard component",
      "status": "pending",
      "content": "Create the ReleaseCard component to display individual releases:\n\n1. Create ReleaseCard.tsx with props: release, onClick\n2. Display tag name (version) prominently\n3. Display release name below tag\n4. Show Draft badge (amber/yellow) if isDraft is true\n5. Show Pre-release badge (orange) if isPrerelease is true\n6. Display relative publish date using formatRelativeTime helper\n7. Add keyboard navigation support (Enter/Space)\n8. Create ReleaseCard.css following IssueCard.css patterns\n9. Use tag icon for border-left accent\n\nFollow IssueCard.tsx structure closely.",
      "verification": [
        "TypeScript compiles without errors",
        "Component renders with mock data"
      ],
      "addressesCriteria": ["SC2", "SC3", "SC4"],
      "files": [
        "apps/desktop/src/components/sidebar/ReleaseCard.tsx",
        "apps/desktop/src/components/sidebar/ReleaseCard.css"
      ],
      "dependencies": [2]
    },
    {
      "number": 4,
      "title": "Create ReleasesSection and integrate",
      "status": "pending",
      "content": "Create the ReleasesSection component and integrate into the sidebar:\n\n1. Create ReleasesSection.tsx following IssuesSection.tsx pattern:\n   - Use CollapsibleSection wrapper\n   - Fetch releases on mount using invoke('fetch_github_releases')\n   - Check gh auth first\n   - Handle loading, error, empty states\n   - Render list of ReleaseCard components\n   - Add refresh button with spinning animation\n   - Use tag/release icon for section\n2. Create ReleasesSection.css following IssuesSection.css patterns\n3. Import and render ReleasesSection in App.tsx sidebar panel\n4. Position after IssuesSection\n\nVerify full flow: load releases, display cards, refresh works.",
      "verification": [
        "TypeScript compiles without errors",
        "Tauri app builds successfully",
        "Releases section appears in sidebar",
        "Releases load when section is visible",
        "Refresh button works",
        "Empty state shows when no releases",
        "Error state shows on failure"
      ],
      "addressesCriteria": ["SC1", "SC5", "SC6", "SC7", "SC8"],
      "files": [
        "apps/desktop/src/components/sidebar/ReleasesSection.tsx",
        "apps/desktop/src/components/sidebar/ReleasesSection.css",
        "apps/desktop/src/App.tsx"
      ],
      "dependencies": [3]
    }
  ],
  "coverageMatrix": {
    "SC1": [1, 2, 4],
    "SC2": [3],
    "SC3": [3],
    "SC4": [3],
    "SC5": [4],
    "SC6": [4],
    "SC7": [4],
    "SC8": [4]
  }
}
